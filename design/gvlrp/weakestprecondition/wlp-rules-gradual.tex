\begin{spacing}{1.5} \begin{align*} \begin{mathleftalign}
\GWLP \ : \ \Statement \ \times \ \GFrmSatFormula \ \rightarrow \ \GFrmSatFormula \\
\GWLP(s, \tphi) := \
\text{match} \ s \ \text{with} \\
\begin{mathmatchwith}
  s_1 \code{;} \ s_2 &\mt&
    \GWLP(s_1, \ \GWLP(s_2, \ \tphi))
  \\
  % method call
  y \ \code{:=} \ z.m_C(\vec{e}) &\mt&
    \GhandleMethodCall(y \ \code{:=} \ z.m_C(\vec{e}), \tphi)
  \\
  \code{if} \ (e) \ \{ s_\text{the} \} \ \code{else} \ \{ s_\text{els} \} &\mt&
    \req{e} \ \land \
    \impr{\GWLP(s_\text{the}, \tphi) \ \land \ \GWLP(s_\text{els}, \tphi)} \ \land \\ &&
    (\code{if} \ (e) \ \code{then} \ \conc{\GWLP(s_\text{the}, \tphi)} \ \code{else} \ \conc{\GWLP(s_\text{els}, \tphi)})
  \\
  \code{while} \ (e) \ \code{invariant} \ \tphi_\text{inv} \ \{ s_\text{bod} \} &\mt&
    \tsf{required}(e) \ \land \
    \tphi_\text{inv} \ \land \\ &&
    \GWLP(\code{if} \ (e) \ \{ s_\text{bod} \} \ \code{else} \ \{ \code{skip} \}, \ \tphi_\text{inv} \ \imprecise) \\ &&
    \GhandleWhileLoop(\tphi_\text{inv}, s_\text{bod}, \tphi)
  \\
  \code{unfold} \ \alpha_C(\vec{e}) &\mt&
    \tsf{required}(\alpha_C(\vec{e})) \ \land \
    [ \body(\alpha_C(\vec{e})) / \alpha_C(\vec{e}), \
      \phi\p / \cunfolding \ \alpha_C(\vec{e}) \ \cin \ \phi\p ]
    \tphi
  \\
  \code{fold} \ \alpha_C(\vec{e}) &\mt&
    \req{\vec{e}} \ \land \
    [ \alpha_C(\vec{e}) / \body(\alpha_C(\vec{e})) ] \tphi
  \\
  \text{otherwise} &\mt&
    \WLP(s, \conc{\tphi}) \ \ast \ \impr{\tphi}
  %
  \end{mathmatchwith}
\end{mathleftalign} \end{align*} \end{spacing}
